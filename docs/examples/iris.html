<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<title>Embedding.js Iris example</title>

		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r81/three.min.js"></script>
		<script type="text/javascript" src="js/VRControls.js"></script>
		<script type="text/javascript" src="js/VREffect.js"></script>

		<style>
			/* Ensures that the canvas fills the entire window, and that there are no scrollbars */
			body {
				width: 100%;
				height: 100%;
				background-color: #000;
				color: #fff;
				margin: 0px;
				padding: 0;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<script src="js/embedding.js"></script>
		<script>
		const { scene, camera, manager, effect, cameraControls } = EMBED.initScene();
		var dataset, embedding;
		var S = .02;

		scene.add(new THREE.AmbientLight( 0xffffff, 1.0 ));

		EMBED.Dataset.createFromCSV('data/iris.csv', 
			function(dataset) {
				embedding = new EMBED.MeshEmbedding(scene, dataset, 
					{
						mapping: {
							x: 'petal_length',
							y: 'petal_width',
							z: 'sepal_length'
						},
						geometry: [
							(dp) => new THREE.BoxGeometry(S*dp.get('petal_width'), S*dp.get('petal_length'), .01),
							(dp) => new THREE.BoxGeometry(S*dp.get('sepal_width'), .01, S*dp.get('sepal_length'))
						],
						color: EMBED.utils.categoricalMap('species', {
							'Iris-setosa': 0xff0000,
							'Iris-virginica': 0x00ff00,
							'Iris-versicolor': 0x0000ff
						}),
						ry: .85 * Math.PI,
						z: 3
					});
				EMBED.register(embedding);
				EMBED.startAnimation();
			}
		);

		</script>
	</body>
</html>